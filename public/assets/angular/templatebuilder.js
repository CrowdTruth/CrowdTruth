var app=angular.module("templatebuilder",['builder','builder.components','builder.controller','ui.bootstrap','ui.ace']);app.controller("templatebuilderCtrl",["$scope","$sce","$timeout",function($scope,$sce,$timeout){$scope.uncleancss="input{width:100px}";$scope.formoldlength=-1;$scope.$on('formchanged',function(event,f){if(f.length!=$scope.formoldlength){$.scoped();$scope.formoldlength=f.length};$scope.form=f});$scope.$on('testchanged',function(event,t){console.log(t)});$scope.changeTab=function(tab){$scope.tab=tab;if(tab=='components'){$(".popover").hide();$("#popoverhack").remove()}else $("head").append("<style id='popoverhack'>.popover { display:none !important }</style>")};$scope.cssLoaded=function(_editor){var promise;_editor.getSession().on("change",function(){if(promise)$timeout.cancel(promise);promise=$timeout(function(){console.log('timeout');$scope.css=$sce.trustAsHtml(_editor.getSession().getValue())},1e3)});$scope.$watch('tab',function(){if($scope.tab=='css')_editor.focus()})};$scope.jsLoaded=function(_editor){$scope.$watch('tab',function(){if($scope.tab=='js')_editor.focus()})}}]);